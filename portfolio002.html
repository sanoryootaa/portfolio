<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ryota Sano — Portfolio</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Instrument+Serif:ital@0;1&family=Manrope:wght@300;400;500;600;700;800&family=Geist+Mono:wght@300;400&display=swap" rel="stylesheet">
<style>
*, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }

:root {
  --bg: #fafafa;
  --bg-alt: #f0f0f0;
  --fg: #111;
  --fg-mid: #555;
  --fg-dim: #999;
  --fg-ghost: #ddd;
  --display: 'Manrope', sans-serif;
  --serif: 'Instrument Serif', Georgia, serif;
  --mono: 'Geist Mono', 'SF Mono', monospace;
}

html { scroll-behavior: smooth; }
body {
  background: var(--bg); color: var(--fg);
  font-family: var(--mono); font-weight: 300; font-size: 12px;
  line-height: 1.6; overflow-x: hidden; -webkit-font-smoothing: antialiased;
}
::selection { background: var(--fg); color: var(--bg); }

/* Loader */
#loader {
  position: fixed; inset: 0; z-index: 10000; background: var(--bg);
  display: flex; align-items: center; justify-content: center;
  transition: opacity 0.6s ease, visibility 0.6s ease;
}
#loader.hidden { opacity: 0; visibility: hidden; pointer-events: none; }
#loader span { font-family: var(--display); font-size: 0.85rem; font-weight: 700; letter-spacing: 0.25em; text-transform: uppercase; animation: blink 0.8s step-end infinite; }
@keyframes blink { 50% { opacity: 0; } }

/* Nav */
nav {
  position: fixed; top: 0; left: 0; right: 0; z-index: 100;
  padding: 24px 32px; display: flex; justify-content: space-between; align-items: center;
  transition: background 0.3s ease;
}
nav.scrolled { background: rgba(250,250,250,0.92); backdrop-filter: blur(10px); }
.logo { font-family: var(--display); font-weight: 700; font-size: 0.8rem; letter-spacing: 0.12em; text-transform: uppercase; color: var(--fg); text-decoration: none; }
.nav-links { display: flex; gap: 28px; list-style: none; }
.nav-links a { font-family: var(--mono); font-size: 10px; letter-spacing: 0.15em; text-transform: uppercase; color: var(--fg-mid); text-decoration: none; transition: color 0.2s; }
.nav-links a:hover { color: var(--fg); }

/* ---- HERO ---- */
.hero {
  min-height: 100vh; display: flex; flex-direction: column; justify-content: flex-end;
  padding: 0 32px 56px; position: relative;
}
.hero-name {
  font-family: var(--display); font-weight: 800;
  font-size: clamp(3.5rem, 12vw, 11rem); line-height: 0.88;
  letter-spacing: -0.045em; text-transform: uppercase;
}
.hero-name .line { display: block; overflow: hidden; }
.hero-name .line-inner { display: block; transform: translateY(105%); animation: slide-up 0.9s cubic-bezier(0.16,1,0.3,1) forwards; }
.hero-name .line:nth-child(2) .line-inner { animation-delay: 0.12s; }
.hero-name .contrast { font-family: var(--serif); font-weight: 400; font-style: italic; text-transform: none; letter-spacing: -0.02em; }

.hero-meta {
  display: flex; justify-content: space-between; align-items: flex-end;
  margin-top: 36px; padding-top: 20px; border-top: 1px solid var(--fg-ghost);
}
.hero-tags { display: flex; gap: 12px; opacity: 0; animation: fade-in 0.6s ease forwards 0.6s; }
.hero-tags span {
  font-family: var(--mono); font-size: 10px; letter-spacing: 0.12em; text-transform: uppercase;
  color: var(--fg-dim); padding: 6px 14px; border: 1px solid var(--fg-ghost); transition: all 0.3s ease; cursor: default;
}
.hero-tags span:hover { border-color: var(--fg); color: var(--fg); }
.hero-scroll { font-family: var(--mono); font-size: 10px; letter-spacing: 0.15em; text-transform: uppercase; color: var(--fg-dim); opacity: 0; animation: fade-in 0.6s ease forwards 0.8s; }

/* ---- SCROLL-LINKED TEXT DIVIDER ---- */
.scroll-text-section {
  padding: 100px 32px;
  position: relative;
  overflow: hidden;
  border-top: 1px solid var(--fg-ghost);
  border-bottom: 1px solid var(--fg-ghost);
}
.scroll-text {
  font-family: var(--display);
  font-weight: 800;
  font-size: clamp(2rem, 7vw, 6rem);
  text-transform: uppercase;
  letter-spacing: -0.03em;
  line-height: 1.1;
  color: var(--fg-ghost);
  text-align: center;
  transition: none;
  will-change: transform, opacity, letter-spacing;
}
.scroll-text .word {
  display: inline-block;
  transition: none;
}
.scroll-text .serif-word {
  font-family: var(--serif);
  font-style: italic;
  font-weight: 400;
  text-transform: none;
  letter-spacing: 0;
}

/* ---- SECTION COMMON ---- */
.section-padding { padding: 120px 32px 80px; }
.section-head { display: flex; justify-content: space-between; align-items: flex-end; margin-bottom: 64px; }
.section-title {
  font-family: var(--display); font-weight: 800;
  font-size: clamp(1.8rem, 4.5vw, 3.2rem);
  text-transform: uppercase; letter-spacing: -0.03em; line-height: 1;
}
.section-title .i { font-family: var(--serif); font-style: italic; font-weight: 400; text-transform: none; letter-spacing: -0.01em; }
.section-count { font-family: var(--serif); font-style: italic; font-size: 1.1rem; color: var(--fg-dim); }

/* ---- SHOWREEL ---- */
#showreel { padding: 120px 32px 80px; }
.reel-wrapper { position: relative; width: 100%; aspect-ratio: 16/9; background: var(--bg-alt); overflow: hidden; }
.reel-wrapper iframe { width: 100%; height: 100%; border: none; }
.reel-placeholder {
  width: 100%; height: 100%; display: flex; flex-direction: column;
  align-items: center; justify-content: center; gap: 16px; cursor: pointer; transition: background 0.3s ease;
}
.reel-placeholder:hover { background: #e8e8e8; }
.reel-placeholder .play-icon {
  width: 56px; height: 56px; border: 2px solid var(--fg); border-radius: 50%;
  display: flex; align-items: center; justify-content: center; transition: transform 0.3s ease;
}
.reel-placeholder:hover .play-icon { transform: scale(1.1); }
.reel-placeholder .play-icon::after { content: ''; width: 0; height: 0; border-left: 16px solid var(--fg); border-top: 10px solid transparent; border-bottom: 10px solid transparent; margin-left: 4px; }
.reel-placeholder span { font-family: var(--mono); font-size: 10px; letter-spacing: 0.2em; text-transform: uppercase; color: var(--fg-mid); }

/* ---- WORKS ---- */
.filter-bar { display: flex; gap: 10px; flex-wrap: wrap; margin-bottom: 56px; }
.filter-tag {
  font-family: var(--mono); font-size: 10px; letter-spacing: 0.12em; text-transform: uppercase;
  color: var(--fg-dim); padding: 7px 15px; border: 1px solid var(--fg-ghost);
  background: transparent; cursor: pointer; transition: all 0.2s ease;
}
.filter-tag:hover, .filter-tag.active { background: var(--fg); color: var(--bg); border-color: var(--fg); }

.works-grid { display: grid; grid-template-columns: repeat(12, 1fr); gap: 20px; row-gap: 80px; }
.work-item { position: relative; opacity: 0; transform: translateY(40px); transition: all 0.7s cubic-bezier(0.16,1,0.3,1); }
.work-item.visible { opacity: 1; transform: translateY(0); }
.work-item:nth-child(4n+1) { grid-column: 1/8; }
.work-item:nth-child(4n+2) { grid-column: 8/13; margin-top: 100px; }
.work-item:nth-child(4n+3) { grid-column: 2/7; }
.work-item:nth-child(4n+4) { grid-column: 6/12; margin-top: -40px; }

.work-img { position: relative; overflow: hidden; background: var(--bg-alt); cursor: pointer; }
.work-item:nth-child(3n+1) .work-img { aspect-ratio: 16/10; }
.work-item:nth-child(3n+2) .work-img { aspect-ratio: 3/4; }
.work-item:nth-child(3n+3) .work-img { aspect-ratio: 4/3; }
.work-img img { width: 100%; height: 100%; object-fit: cover; transition: transform 0.8s cubic-bezier(0.16,1,0.3,1); filter: grayscale(100%); }
.work-item:hover .work-img img { transform: scale(1.04); filter: grayscale(0%); }

.work-index {
  font-family: var(--display); font-weight: 800; font-size: clamp(2.5rem,5vw,4.5rem);
  line-height: 1; color: var(--fg-ghost); position: absolute; top: -28px; left: -6px;
  z-index: 2; pointer-events: none; transition: color 0.4s ease;
}
.work-item:hover .work-index { color: var(--fg); }

.work-details { padding: 14px 0 0; }
.work-name { font-family: var(--display); font-weight: 600; font-size: 0.9rem; letter-spacing: 0.01em; text-transform: uppercase; margin-bottom: 4px; }
.work-cat { font-family: var(--mono); font-size: 10px; letter-spacing: 0.12em; text-transform: uppercase; color: var(--fg-dim); }
.work-desc { font-family: var(--mono); font-size: 11px; color: var(--fg-mid); margin-top: 8px; line-height: 1.7; max-width: 420px; }
.work-link { display: inline-block; margin-top: 10px; font-family: var(--mono); font-size: 10px; letter-spacing: 0.1em; text-transform: uppercase; color: var(--fg); text-decoration: none; border-bottom: 1px solid var(--fg); padding-bottom: 2px; transition: opacity 0.2s; }
.work-link:hover { opacity: 0.4; }

/* ---- AWARDS & SCREENING ---- */
#awards { background: var(--bg-alt); }
.awards-list { max-width: 800px; }
.award-row {
  display: grid; grid-template-columns: 72px 1fr auto; gap: 24px;
  padding: 20px 0; border-bottom: 1px solid var(--fg-ghost); align-items: baseline;
  opacity: 0; transform: translateX(-20px); transition: all 0.5s ease;
}
.award-row.visible { opacity: 1; transform: translateX(0); }
.award-year { font-family: var(--serif); font-style: italic; font-size: 1rem; color: var(--fg-dim); }
.award-title { font-family: var(--display); font-weight: 500; font-size: 0.82rem; text-transform: uppercase; letter-spacing: 0.01em; }
.award-type { font-family: var(--mono); font-size: 10px; letter-spacing: 0.1em; text-transform: uppercase; color: var(--fg-dim); }

/* ---- ABOUT ---- */
.about-layout { display: grid; grid-template-columns: 1.2fr 1fr; gap: 80px; }
.about-heading {
  font-family: var(--display); font-weight: 800;
  font-size: clamp(2rem, 4.5vw, 3.2rem);
  text-transform: uppercase; letter-spacing: -0.03em; line-height: 1; margin-bottom: 48px;
}
.about-heading .i { font-family: var(--serif); font-style: italic; font-weight: 400; text-transform: none; }
.about-body { font-family: var(--mono); font-size: 12px; line-height: 2.1; color: var(--fg-mid); max-width: 480px; }
.about-body strong { color: var(--fg); font-weight: 400; }
.info-block { margin-bottom: 32px; }
.info-label { font-family: var(--mono); font-size: 9px; letter-spacing: 0.25em; text-transform: uppercase; color: var(--fg-dim); margin-bottom: 8px; }
.info-value { font-family: var(--mono); font-size: 12px; color: var(--fg); line-height: 1.8; }

/* ---- CONTACT ---- */
#contact { padding: 160px 32px; text-align: center; }
.contact-big {
  font-family: var(--display); font-weight: 800;
  font-size: clamp(2rem, 6vw, 4.5rem);
  text-transform: uppercase; letter-spacing: -0.03em; line-height: 1.1; margin-bottom: 48px;
}
.contact-big .i { font-family: var(--serif); font-style: italic; font-weight: 400; text-transform: none; }
.contact-mail a { font-family: var(--mono); font-size: 12px; letter-spacing: 0.1em; text-transform: uppercase; color: var(--fg); text-decoration: none; border-bottom: 1px solid var(--fg); padding-bottom: 4px; transition: opacity 0.2s; }
.contact-mail a:hover { opacity: 0.4; }

/* Footer */
footer { padding: 28px 32px; display: flex; justify-content: space-between; align-items: center; border-top: 1px solid var(--fg-ghost); }
footer span { font-family: var(--mono); font-size: 10px; letter-spacing: 0.1em; text-transform: uppercase; color: var(--fg-dim); }
.social-links { display: flex; gap: 24px; }
.social-links a { font-family: var(--mono); font-size: 10px; letter-spacing: 0.1em; text-transform: uppercase; color: var(--fg-dim); text-decoration: none; transition: color 0.2s; }
.social-links a:hover { color: var(--fg); }

/* Modal */
.modal-overlay { position: fixed; inset: 0; z-index: 1000; background: rgba(250,250,250,0.96); display: flex; align-items: center; justify-content: center; opacity: 0; visibility: hidden; transition: all 0.4s ease; cursor: pointer; backdrop-filter: blur(16px); }
.modal-overlay.active { opacity: 1; visibility: visible; }
.modal-content img { max-width: 85vw; max-height: 85vh; object-fit: contain; }
.modal-close { position: fixed; top: 24px; right: 32px; font-family: var(--mono); font-size: 10px; letter-spacing: 0.15em; text-transform: uppercase; color: var(--fg-mid); background: none; border: none; cursor: pointer; }
.modal-close:hover { color: var(--fg); }

/* Responsive */
@media (max-width: 768px) {
  nav { padding: 16px 20px; }
  .nav-links { gap: 14px; }
  .hero { padding: 0 20px 40px; }
  .hero-meta { flex-direction: column; gap: 16px; align-items: flex-start; }
  .scroll-text-section { padding: 60px 20px; }
  .section-padding { padding: 80px 20px 60px; }
  #showreel { padding: 80px 20px 60px; }
  .works-grid { grid-template-columns: 1fr; row-gap: 60px; }
  .work-item:nth-child(n) { grid-column: 1 / -1; margin-top: 0 !important; }
  .about-layout { grid-template-columns: 1fr; gap: 48px; }
  .award-row { grid-template-columns: 56px 1fr; gap: 12px; }
  .award-type { grid-column: 2; }
  #contact { padding: 100px 20px; }
  footer { padding: 20px; flex-direction: column; gap: 12px; }
}

@keyframes slide-up { to { transform: translateY(0); } }
@keyframes fade-in { to { opacity: 1; } }
</style>
</head>
<body>

<div id="loader"><span>Loading</span></div>

<nav id="nav">
  <a href="#" class="logo" id="nav-name">Ryota Sano</a>
  <ul class="nav-links">
    <li><a href="#showreel">Reel</a></li>
    <li><a href="#works">Works</a></li>
    <li><a href="#awards">Awards</a></li>
    <li><a href="#about">About</a></li>
    <li><a href="#contact">Contact</a></li>
  </ul>
</nav>

<section class="hero">
  <h1 class="hero-name" id="hero-name">
    <span class="line"><span class="line-inner">Ryota</span></span>
    <span class="line"><span class="line-inner"><span class="contrast">Sano</span></span></span>
  </h1>
  <div class="hero-meta">
    <div class="hero-tags" id="hero-tags">
      <span>Film</span><span>Projection Mapping</span><span>Installation</span>
    </div>
    <div class="hero-scroll">Scroll ↓</div>
  </div>
</section>

<!-- SCROLL-LINKED TEXT -->
<div class="scroll-text-section" id="scroll-divider-1">
  <div class="scroll-text" id="scroll-text-1">
    Film <span class="serif-word">meets</span> Space
  </div>
</div>

<!-- SHOWREEL -->
<section id="showreel" class="section-padding">
  <div class="section-head">
    <h2 class="section-title">Show<span class="i">reel</span></h2>
  </div>
  <div class="reel-wrapper" id="reel-wrapper">
    <div class="reel-placeholder" id="reel-placeholder">
      <div class="play-icon"></div>
      <span>Play Showreel</span>
    </div>
  </div>
</section>

<!-- WORKS -->
<section id="works" class="section-padding">
  <div class="section-head">
    <h2 class="section-title">Selected<br><span class="i">Works</span></h2>
    <span class="section-count" id="works-count"></span>
  </div>
  <div class="filter-bar" id="filter-bar"></div>
  <div class="works-grid" id="works-grid"></div>
</section>

<!-- SCROLL-LINKED TEXT 2 -->
<div class="scroll-text-section" id="scroll-divider-2">
  <div class="scroll-text" id="scroll-text-2">
    Light <span class="serif-word">&</span> Perception
  </div>
</div>

<!-- AWARDS & SCREENING -->
<section id="awards" class="section-padding">
  <div class="section-head">
    <h2 class="section-title">Awards &<br><span class="i">Screening</span></h2>
  </div>
  <div class="awards-list" id="awards-list"></div>
</section>

<!-- ABOUT -->
<section id="about" class="section-padding">
  <div class="about-layout">
    <div>
      <h2 class="about-heading">About<br><span class="i">the artist</span></h2>
      <div class="about-body" id="about-text"></div>
    </div>
    <div id="about-details"></div>
  </div>
</section>

<!-- CONTACT -->
<section id="contact">
  <h2 class="contact-big">Let's<br><span class="i">work together</span></h2>
  <div class="contact-mail"><a href="" id="contact-email"></a></div>
</section>

<footer>
  <span id="footer-copy">© 2026 Ryota Sano</span>
  <div class="social-links" id="social-links"></div>
</footer>

<div class="modal-overlay" id="modal">
  <button class="modal-close">Close ✕</button>
  <div class="modal-content"><img src="" alt="" id="modal-img"></div>
</div>

<script>
// ============================================================
//  CONFIG
// ============================================================
const CONFIG = {
  WORKS_CSV_URL: '',
  PROFILE_CSV_URL: '',
  AWARDS_CSV_URL: '',
  SHOWREEL_URL: '',
};

// ============================================================
//  DEMO DATA
// ============================================================
const DEMO_WORKS = [
  { title: 'Silence Between Frames', category: 'Film', description: '静寂の中に潜む感情を、光と影のコントラストで描いた実験的ショートフィルム。', thumbnail: 'https://images.unsplash.com/photo-1536440136628-849c177e76a1?w=800&q=80', url: '#', year: '2025' },
  { title: 'LUMINA', category: 'Projection Mapping', description: '建築物の構造を読み解き、光と音で再構築するプロジェクションマッピング作品。', thumbnail: 'https://images.unsplash.com/photo-1550745165-9bc0b252726f?w=800&q=80', url: '#', year: '2025' },
  { title: 'The Weight of Light', category: 'Installation', description: '光の質量を問う映像インスタレーション。自然光の変化を48時間記録。', thumbnail: 'https://images.unsplash.com/photo-1518005020951-eccb494ad742?w=800&q=80', url: '#', year: '2024' },
  { title: 'Urban Fragments', category: 'Film', description: '都市の断片を集め、再構成することで見えてくる新しい風景。', thumbnail: 'https://images.unsplash.com/photo-1514565131-fce0801e5785?w=800&q=80', url: '#', year: '2024' },
  { title: 'Nocturne', category: 'Projection Mapping', description: '夜の公共空間に介入する光のインスタレーション。', thumbnail: 'https://images.unsplash.com/photo-1477346611705-65d1883cee1e?w=800&q=80', url: '#', year: '2024' },
];

const DEMO_AWARDS = [
  { year: '2025', title: 'Example Media Arts Festival — Grand Prize', type: 'Award' },
  { year: '2025', title: 'Example Gallery, Tokyo — Solo Exhibition', type: 'Screening' },
  { year: '2024', title: 'Example International Film Festival — Official Selection', type: 'Screening' },
  { year: '2024', title: 'Example Museum of Art — Group Exhibition', type: 'Award' },
  { year: '2024', title: 'Example Design Award — Honorable Mention', type: 'Award' },
];

const DEMO_PROFILE = {
  name: 'Ryota Sano',
  tagline: 'Film — Projection Mapping — Installation',
  about: '<strong>佐野僚太</strong>。映像、プロジェクションマッピング、インスタレーションを軸に活動。光と空間の関係性を探り、テクノロジーと身体感覚の境界を問う作品を制作しています。',
  email: 'hello@example.com',
  location: 'Tokyo, Japan',
  tools: 'Resolume, TouchDesigner, After Effects, Premiere Pro, Blender',
  education: '',
  affiliation: '',
  social_instagram: '',
  social_vimeo: '',
  social_youtube: '',
};

// ============================================================
//  CSV
// ============================================================
function parseCSV(t){const l=t.trim().split('\n');if(l.length<2)return[];const pr=r=>{const res=[];let c='',q=false;for(let i=0;i<r.length;i++){const ch=r[i];if(q){if(ch==='"'&&r[i+1]==='"'){c+='"';i++}else if(ch==='"')q=false;else c+=ch}else{if(ch==='"')q=true;else if(ch===','){res.push(c.trim());c=''}else c+=ch}}res.push(c.trim());return res};const h=pr(l[0]).map(x=>x.toLowerCase().replace(/\s+/g,'_'));const rows=[];for(let i=1;i<l.length;i++){if(!l[i].trim())continue;const v=pr(l[i]);const o={};h.forEach((k,j)=>{o[k]=v[j]||''});rows.push(o)}return rows}
function parseProfile(r){if(!r.length)return null;const p={};r.forEach(row=>{const k=(row.key||row['項目']||Object.values(row)[0]||'').toLowerCase().replace(/\s+/g,'_');const v=row.value||row['内容']||Object.values(row)[1]||'';if(k)p[k]=v});return p}
async function fetchCSV(u){const r=await fetch(u);if(!r.ok)throw new Error(r.status);return await r.text()}
async function loadData(){
  let works=DEMO_WORKS,profile=DEMO_PROFILE,awards=DEMO_AWARDS;
  if(CONFIG.WORKS_CSV_URL){try{const d=parseCSV(await fetchCSV(CONFIG.WORKS_CSV_URL));if(d.length)works=d}catch(e){console.warn(e)}}
  if(CONFIG.PROFILE_CSV_URL){try{const d=parseProfile(parseCSV(await fetchCSV(CONFIG.PROFILE_CSV_URL)));if(d)profile={...DEMO_PROFILE,...d}}catch(e){console.warn(e)}}
  if(CONFIG.AWARDS_CSV_URL){try{const d=parseCSV(await fetchCSV(CONFIG.AWARDS_CSV_URL));if(d.length)awards=d}catch(e){console.warn(e)}}
  return{works,profile,awards};
}

// ============================================================
//  SCROLL-LINKED TEXT ANIMATION
// ============================================================
function setupScrollText() {
  const sections = document.querySelectorAll('.scroll-text-section');
  
  function update() {
    sections.forEach(section => {
      const rect = section.getBoundingClientRect();
      const vh = window.innerHeight;
      const textEl = section.querySelector('.scroll-text');
      
      // Calculate progress: 0 when entering bottom, 1 when leaving top
      const rawProgress = 1 - (rect.bottom / (vh + rect.height));
      const progress = Math.max(0, Math.min(1, rawProgress));
      
      // Scale: starts small (0.6), peaks at center (1.0), shrinks again
      const distFromCenter = Math.abs(progress - 0.5) * 2; // 0 at center, 1 at edges
      const scale = 0.65 + (1 - distFromCenter) * 0.35;
      
      // Opacity: fades in and out
      const opacity = 1 - distFromCenter * 0.7;
      
      // Letter spacing: tight at center, spread at edges
      const spacing = distFromCenter * 0.08;
      
      // Slight Y parallax
      const translateY = (progress - 0.5) * -30;
      
      // Color: transitions from ghost to fg as it approaches center
      const colorVal = Math.round(221 - (1 - distFromCenter) * 204); // ddd(221) to 111(17)
      const hex = colorVal.toString(16).padStart(2, '0');
      
      textEl.style.transform = `scale(${scale}) translateY(${translateY}px)`;
      textEl.style.opacity = opacity;
      textEl.style.letterSpacing = `${spacing}em`;
      textEl.style.color = `#${hex}${hex}${hex}`;
    });
    
    requestAnimationFrame(update);
  }
  
  requestAnimationFrame(update);
}

// ============================================================
//  RENDERING
// ============================================================
let allWorks = [];

function renderProfile(p) {
  document.getElementById('nav-name').textContent = p.name || 'Portfolio';
  const hero = document.getElementById('hero-name');
  const parts = (p.name || 'Ryota Sano').split(' ');
  hero.innerHTML = parts.map((w, i) => {
    const inner = i === parts.length - 1 ? `<span class="contrast">${w}</span>` : w;
    return `<span class="line"><span class="line-inner">${inner}</span></span>`;
  }).join('');
  const tags = (p.tagline || '').split(/[—,\/]/).map(s => s.trim()).filter(Boolean);
  document.getElementById('hero-tags').innerHTML = tags.map(t => `<span>${t}</span>`).join('');
  document.getElementById('about-text').innerHTML = p.about || '';
  const det = document.getElementById('about-details'); det.innerHTML = '';
  [['Education',p.education],['Affiliation',p.affiliation],['Location',p.location],['Tools',p.tools]].forEach(([l,v])=>{
    if(!v)return; det.innerHTML+=`<div class="info-block"><div class="info-label">${l}</div><div class="info-value">${v}</div></div>`;
  });
  if(p.email){const e=document.getElementById('contact-email');e.href='mailto:'+p.email;e.textContent=p.email;}
  const s=document.getElementById('social-links');s.innerHTML='';
  [['Ig',p.social_instagram],['Vimeo',p.social_vimeo],['Yt',p.social_youtube]].forEach(([n,u])=>{if(!u)return;s.innerHTML+=`<a href="${u}" target="_blank" rel="noopener">${n}</a>`});
  document.getElementById('footer-copy').textContent=`© ${new Date().getFullYear()} ${p.name||''}`;
}

function renderShowreel(){
  const wrapper=document.getElementById('reel-wrapper');
  const placeholder=document.getElementById('reel-placeholder');
  if(CONFIG.SHOWREEL_URL){wrapper.innerHTML=`<iframe src="${CONFIG.SHOWREEL_URL}" allow="autoplay; fullscreen; picture-in-picture" allowfullscreen loading="lazy"></iframe>`}
  else{placeholder.addEventListener('click',()=>{placeholder.querySelector('span').textContent='Set SHOWREEL_URL in CONFIG'})}
}

function renderWorks(works,filter){
  allWorks=works;
  const filtered=filter&&filter!=='All'?works.filter(w=>(w.category||'')===filter):works;
  const grid=document.getElementById('works-grid');grid.innerHTML='';
  document.getElementById('works-count').textContent=`(${String(filtered.length).padStart(2,'0')})`;
  filtered.forEach((w,i)=>{
    const idx=String(i+1).padStart(2,'0');
    const item=document.createElement('div');item.className='work-item';
    const link=w.url&&w.url!=='#'?`<a href="${w.url}" class="work-link" target="_blank">View →</a>`:'';
    item.innerHTML=`<span class="work-index">${idx}</span><div class="work-img" data-img="${w.thumbnail||''}"><img src="${w.thumbnail||''}" alt="${w.title||''}" loading="lazy" onerror="this.style.display='none'"></div><div class="work-details"><div class="work-name">${w.title||''}</div><div class="work-cat">${w.category||''}${w.year?' / '+w.year:''}</div><p class="work-desc">${w.description||''}</p>${link}</div>`;
    grid.appendChild(item);
  });
  observe('.work-item');
}

function renderFilters(works){
  const cats=['All',...new Set(works.map(w=>w.category).filter(Boolean))];
  const bar=document.getElementById('filter-bar');
  bar.innerHTML=cats.map(c=>`<button class="filter-tag${c==='All'?' active':''}" data-cat="${c}">${c}</button>`).join('');
  bar.addEventListener('click',e=>{const t=e.target.closest('.filter-tag');if(!t)return;bar.querySelectorAll('.filter-tag').forEach(x=>x.classList.remove('active'));t.classList.add('active');renderWorks(allWorks,t.dataset.cat)});
}

function renderAwards(awards){
  const list=document.getElementById('awards-list');list.innerHTML='';
  awards.forEach(a=>{
    const row=document.createElement('div');row.className='award-row';
    row.innerHTML=`<span class="award-year">${a.year||''}</span><span class="award-title">${a.title||''}</span><span class="award-type">${a.type||''}</span>`;
    list.appendChild(row);
  });
  observe('.award-row');
}

// ============================================================
//  UTILS
// ============================================================
function observe(selector){
  const obs=new IntersectionObserver(entries=>{entries.forEach(e=>{if(e.isIntersecting){e.target.classList.add('visible');obs.unobserve(e.target)}})},{threshold:0.08,rootMargin:'0px 0px -30px 0px'});
  document.querySelectorAll(selector).forEach(el=>{if(!el.classList.contains('visible'))obs.observe(el)});
}

function setupModal(){
  const modal=document.getElementById('modal'),img=document.getElementById('modal-img');
  document.addEventListener('click',e=>{const w=e.target.closest('.work-img');if(w?.dataset.img){img.src=w.dataset.img;modal.classList.add('active');document.body.style.overflow='hidden'}});
  modal.addEventListener('click',()=>{modal.classList.remove('active');document.body.style.overflow=''});
  document.addEventListener('keydown',e=>{if(e.key==='Escape'){modal.classList.remove('active');document.body.style.overflow=''}});
}

// ============================================================
//  INIT
// ============================================================
async function init(){
  setupModal();
  setupScrollText();
  window.addEventListener('scroll',()=>document.getElementById('nav').classList.toggle('scrolled',window.scrollY>60));
  const{works,profile,awards}=await loadData();
  renderProfile(profile);
  renderShowreel();
  renderFilters(works);
  renderWorks(works);
  renderAwards(awards);
  setTimeout(()=>document.getElementById('loader').classList.add('hidden'),400);
}
init();
</script>
</body>
</html>
